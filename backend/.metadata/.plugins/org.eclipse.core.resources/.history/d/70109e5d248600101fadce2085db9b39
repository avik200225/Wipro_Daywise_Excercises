package com.wipro.orderms.entity;

import jakarta.persistence.*;
import lombok.*;
import java.time.LocalDateTime;
import java.util.HashMap;
import java.util.Map;

@Entity
@Table(name="orders")
@Getter @Setter @NoArgsConstructor @AllArgsConstructor @Builder
public class Order {
  @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Integer orderId;

  private Integer userId;

  // Map<ProductId, Qty>
  @ElementCollection
  @CollectionTable(name="order_items", joinColumns=@JoinColumn(name="order_id"))
  @MapKeyColumn(name="product_id")
  @Column(name="qty")
  private Map<Integer,Integer> productQuantityMap = new HashMap<>();

  private Double totalAmount = 0.0;

  @Enumerated(EnumType.STRING)
  private OrderStatus orderStatus = OrderStatus.PLACED;

  private LocalDateTime orderDate = LocalDateTime.now();
}

