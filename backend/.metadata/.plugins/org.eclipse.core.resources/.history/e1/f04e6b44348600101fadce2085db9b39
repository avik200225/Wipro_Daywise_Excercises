package com.wipro.orderms.controller;

import com.wipro.orderms.dto.OrderCreateRequest;
import com.wipro.orderms.entity.Order;
import com.wipro.orderms.service.OrderService;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/order")
@RequiredArgsConstructor
public class OrderController {

  private final OrderService svc;

  // 1) Create order: POST /order
  @PostMapping
  public Order create(@Valid @RequestBody OrderCreateRequest req) { return svc.create(req); }

  // 2) Cancel order: PUT /order/{orderId}
  @PutMapping("/{orderId}")
  public Order cancel(@PathVariable Integer orderId) { return svc.cancel(orderId); }

  // 3) No delete

  // 4) View order (all)
  @GetMapping
  public List<Order> all() { return svc.listAll(); }

  // 5) List orders by user
  @GetMapping("/{userId}")
  public List<Order> byUser(@PathVariable Integer userId) { return svc.listByUser(userId); }

  // 6) Order details
  @GetMapping("/details/{orderId}")
  public Order details(@PathVariable Integer orderId) { return svc.details(orderId); }
}
